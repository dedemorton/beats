[[breaking-changes-7.0]]

=== Breaking changes in 7.0
++++
<titleabbrev>7.0</titleabbrev>
++++

This section discusses the main changes that you need to be aware of to
migrate Beats to version 7.0. {see-relnotes}

[float]
==== HTML escaping is disabled by default

Starting with verion 7.0, embedded HTML or special symbols like `<` and `>` are
no longer escaped by default when publishing events.
To configure the old behavior of escaping HTML, set `escape_html:
true` in the output configuration.

//tag::notable-breaking-changes[]
[float]
==== Filebeat registry

Starting with version 7.0, Filebeat stores the registry in a sub-directory.
The directory is configured using the `filebeat.registry.path` setting.
If Filebeat finds an old registry file at the configured location, it will
automatically migrate the registry file to the new format.

The settings `filebeat.registry_flush` and `filebeat.registry_file_permission`
have been renamed to `filebeat.registry.flush` and
`filebeat.registry.file_permission`.

//end::notable-breaking-changes[]

[float]
==== ILM support

Support for Index Lifecycle Management is GA with Beats version 7.0. This
release moved most ILM settings from the `output.elasticsearch.ilm` namespace to
the `setup.ilm` namespace.

//tag::notable-breaking-changes[]

[float]
==== Filebeat apache2 module renamed

The Filebeat `apache2` module is renamed to `apache` in 7.0. 

[float]
==== Field name changes

include::./field-name-changes.asciidoc[]

[float]
==== Field type changes

The following fields have type changes in 7.0.

.Auditbeat Type Changes in 7.0
[frame="topbot",options="header"]
|======================
|Field|Old Type|New Type
|`file.gid`     |number |string
|`file.uid`     |number |string
|`process.pid`  |string |number
|`process.ppid` |string |number
|======================

.Filebeat Type Changes in 7.0
[frame="topbot",options="header"]
|====
|Field                         |Old Type  | New Type
|`auditd.log.pid`              | keyword  | long
|`auditd.log.ppid`             | keyword  | long
|`elasticsearch.audit.request` | keyword  | object
|`error.code`                  | keyword  | long
|`haproxy.destination.ip`      | keyword  | ip
|`mysql.slowlog.ip`            | keyword  | ip
|`read_timestamp`              | keyword  | date
|`source`                      | keyword  | object
|`system.auth.groupadd.gid`    | long     | keyword
|`system.auth.timestamp`       | keyword  | date
|`system.auth.useradd.gid`     | long     | keyword
|`system.auth.useradd.uid`     | long     | keyword
|`system.syslog.pid`           | keyword  | long
|`system.syslog.timestamp`     | keyword  | date
|`user_agent.device`           | keyword  | object
|====

.Packetbeat Type Changes in 7.0
[frame="topbot",options="header"]
|====
|Field                         | Old Type | New Type
|`error.code`                  | keyword  | long
|`final`                       | keyword  | boolean
|`http.request.body`           | text     | object
|`http.response.body`          | text     | object
|`http.response.code` (renamed `http.response.status_code`)  | keyword | long
|`real_ip`                     | keyword  | ip
|`server`                      | keyword  | object
|`service`                     | keyword  | object
|`source.ip`                   | keyword  | ip
|`source.port`                 | keyword  | long
|`vlan`                        | keyword  | long
|====

//end::notable-breaking-changes[]
